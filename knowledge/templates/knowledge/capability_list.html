{% extends "knowledge/base.html" %}

{% block title %}Capabilities - {{ product.name }}{% endblock %}

{% block breadcrumb_items %}
<li><a href="{% url 'knowledge:domain_list' product_id=product.pk %}">{{ product.name }}</a></li>
<li>Capabilities</li>
{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
    <div>
        <h1 class="text-2xl font-bold">Capabilities</h1>
        <p class="text-base-content/70">All capabilities in <strong>{{ product.name }}</strong></p>
    </div>
</div>

{% if capabilities %}
<div class="bg-base-100 rounded-lg shadow overflow-x-auto">
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Domain</th>
                <th>SubDomain</th>
                <th>Description</th>
                <th class="w-24"></th>
            </tr>
        </thead>
        <tbody>
            {% for capability in capabilities %}
            <tr class="hover">
                <td>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-puzzle-piece text-primary"></i>
                        <span class="font-medium">{{ capability.name }}</span>
                    </div>
                </td>
                <td>
                    <a href="{% url 'knowledge:domain_list' product_id=product.pk %}" class="link link-hover text-base-content/70">
                        {{ capability.subdomain.domain.name }}
                    </a>
                </td>
                <td>
                    <a href="{% url 'knowledge:subdomain_list' product_id=product.pk %}" class="link link-hover text-base-content/70">
                        {{ capability.subdomain.name }}
                    </a>
                </td>
                <td class="text-base-content/60">{{ capability.description|default:"â€”"|truncatewords:10 }}</td>
                <td>
                    <div class="flex gap-1 justify-end">
                        <a href="{% url 'knowledge:capability_update' product_id=product.pk domain_id=capability.subdomain.domain.pk subdomain_id=capability.subdomain.pk capability_id=capability.pk %}" class="btn btn-ghost btn-xs" title="Edit">
                            <i class="fa-solid fa-pen"></i>
                        </a>
                        <a href="{% url 'knowledge:capability_delete' product_id=product.pk domain_id=capability.subdomain.domain.pk subdomain_id=capability.subdomain.pk capability_id=capability.pk %}" class="btn btn-ghost btn-xs text-error" title="Delete">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="bg-base-100 rounded-lg shadow p-8 text-center">
    <i class="fa-solid fa-puzzle-piece text-4xl text-base-content/30 mb-4"></i>
    <p class="text-base-content/60 mb-4">No capabilities yet. Create domains and subdomains first, then add capabilities to them.</p>
    <a href="{% url 'knowledge:domain_list' product_id=product.pk %}" class="btn btn-primary btn-sm">
        <i class="fa-solid fa-layer-group"></i> Go to Domains
    </a>
</div>
{% endif %}
{% endblock %}
